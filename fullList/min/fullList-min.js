"use strict";angular.module("myWishListApp.fullList",["ngRoute","firebase"]).config(["$routeProvider",function(e){e.when("/fullList",{templateUrl:"fullList/fullList.html",controller:"fullListCtrl"})}]).controller("fullListCtrl",function(e,t,l,o,s){function i(l){console.log("running list");var l=localStorage.getItem("selectedList");if(localStorage)if(localStorage.getItem("selectedList")){e.category=localStorage.getItem("selectedList");var l=localStorage.getItem("selectedList"),s=new Firebase("https://mywishlistlg.firebaseio.com/theUsers/"+l+"/Articles/");console.log("getItem"+localStorage.getItem("selectedList")+s);var i=s.orderByChild("email").equalTo(d.password.email);e.articles=o(i)}else{console.log("runList no local storage"),listCreated=!0,e.category=l;var s=new Firebase("https://mywishlistlg.firebaseio.com/"+l+"/Articles/");s.orderByChild("email").equalTo(d.password.email).on("child_added",function(e){m=e.val(),console.log("myDetails are"+m.email),console.log(typeof m)}),n(l)}else t.path("/welcome")}function n(t){console.log("filteringList"+y);var l=y.orderByChild("email").equalTo(d.password.email);e.articles=o(l)}function c(){document.getElementById("slideOutMenu").style.visibility="hidden",document.getElementById("slideOutMenu").removeEventListener("transitionend",c)}var a=new Firebase("https://mywishlistlg.firebaseio.com/"),r=new Firebase("https://mywishlistlg.firebaseio.com/theUsers/"),d=a.getAuth(),m,u,y;e.listName=d.password.email,e.category=whichList,i(whichList),console.log("Authenticated user with uid: WELCOME",d,d.password.email,d.uid),presenceRef.onDisconnect().set("I disconnected!"),connectedRef.on("value",function(e){e.val()===!0?console.log("connected"):(console.log("not connected"),t.path("/home"))}),e.removeArticle=function(e){y=new Firebase("https://mywishlistlg.firebaseio.com/theUsers/"+whichList+"/Articles/"+e);var t=s(y),l=t[e];console.log(e),t.$remove(e).then(function(t){console.log("removed"+e)})},e.showArticle=function(t,l,o){console.log(t+l+o),y=new Firebase("https://mywishlistlg.firebaseio.com/theUsers/"+o+"/Articles/"+t);var i=s(y);e.data=i,document.getElementById("detailItemsScreen").style.display="block",document.getElementById("fullListScreen").style.display="none"},e.backToList=function(){document.getElementById("detailItemsScreen").style.display="none",document.getElementById("fullListScreen").style.display="block"},e.newItem=function(){console.log(whichList),t.path("/selectCat")},e.gotSelectCat=function(){console.log(whichList),listCreated=!1,t.path("/selectCat")},e.showMyLists=function(){t.path("/welcome")},e.showMenu=function(){document.getElementById("myMenu").style.display="none",document.getElementById("myMenuClose").style.display="block",document.getElementById("slideOutMenu").style.opacity="1",document.getElementById("slideOutMenu").style.visibility="visible"},e.closeMenu=function(){document.getElementById("myMenu").style.display="block",document.getElementById("myMenuClose").style.display="none",document.getElementById("slideOutMenu").style.opacity="0",document.getElementById("slideOutMenu").addEventListener("transitionend",c)}});